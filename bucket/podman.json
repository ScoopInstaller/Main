{
    "version": "5.3.1",
    "description": "A tool for managing OCI containers and pods.",
    "homepage": "https://podman.io/",
    "license": "Apache-2.0",
    "architecture": {
        "64bit": {
            "url": "https://github.com/containers/podman/releases/download/v5.3.1/podman-5.3.1-setup.exe",
            "hash": "c63edc48fbbce0f5650a49701c8a96e5842d83cd73f4c41514ede5ea35efc11d"
        }
    },
    "bin": "podman.exe",
    "pre_install": [
        "if (Test-Path \"$persist_dir\\config\\*\") { Copy-Item \"$persist_dir\\config\\*\" \"$Env:UserProfile\\.config\\containers\" -Recurse }",
        "if (Test-Path \"$persist_dir\\data\\cache\\*\") { Copy-Item \"$persist_dir\\data\\cache\\*\" \"$Env:UserProfile\\.local\\share\\containers\\cache\" -Recurse }",
        "if (Test-Path \"$persist_dir\\data\\podman\\*\") { Copy-Item \"$persist_dir\\data\\podman\\*\" \"$Env:UserProfile\\.local\\share\\containers\\podman\" -Recurse }",
        "if (Test-Path \"$persist_dir\\data\\storage\\*\") { Copy-Item \"$persist_dir\\data\\storage\\*\" \"$Env:UserProfile\\.local\\share\\containers\\storage\" -Recurse }"
    ],
    "installer": {
        "script": [
            "Expand-DarkArchive \"$dir\\podman-$version-setup.exe\" \"$dir\\_tmp\" -Removal",
            "Expand-MsiArchive \"$dir\\_tmp\\AttachedContainer\\podman.msi\" \"$dir\" -ExtractDir 'PFiles64\\RedHat\\Podman'",
            "if (get_config USE_ISOLATED_PATH) {",
            "    Add-Path -Path ('%' + $scoopPathEnvVar + '%') -Global:$global",
            "}",
            "Add-Path -Path $original_dir -TargetEnvVar $scoopPathEnvVar -Global:$global -Force"
        ]
    },
    "post_install": [
        "if ((Test-Path \"$Env:AppData\\containers\\*\") -and !(Test-Path \"$dir\\connections\\*\")) {",
        "    info '[Persist Data]: Moving connections from default data directory to scoop persist directory . . .'",
        "    Move-Item \"$Env:AppData\\containers\\*\" \"$dir\\connections\"",
        "}"
    ],
    "pre_uninstall": [
        "if (Test-Path \"$Env:UserProfile\\.config\\containers\\*\") {",
        "    Remove-Item \"$dir\\config\\*\" -Recurse -Force",
        "    Move-Item \"$Env:UserProfile\\.config\\containers\\*\" \"$dir\\config\"",
        "}",
        "if (Test-Path \"$Env:UserProfile\\.local\\share\\containers\\cache\\*\") {",
        "    Remove-Item \"$dir\\data\\cache\\*\" -Recurse -Force",
        "    Move-Item \"$Env:UserProfile\\.local\\share\\containers\\cache\\*\" \"$dir\\data\\cache\"",
        "}",
        "if (Test-Path \"$Env:UserProfile\\.local\\share\\containers\\podman\\*\") {",
        "    Remove-Item \"$dir\\data\\podman\\*\" -Recurse -Force",
        "    Move-Item \"$Env:UserProfile\\.local\\share\\containers\\podman\\*\" \"$dir\\data\\podman\"",
        "}",
        "if (Test-Path \"$Env:UserProfile\\.local\\share\\containers\\storage\\*\") {",
        "    Remove-Item \"$dir\\data\\storage\\*\" -Recurse -Force",
        "    Move-Item \"$Env:UserProfile\\.local\\share\\containers\\storage\\*\" \"$dir\\data\\storage\"",
        "}"
    ],
    "uninstaller": {
        "script": "Remove-Path -Path $dir -TargetEnvVar $scoopPathEnvVar -Global:$global -Force"
    },
    "env_set": {
        "PODMAN_CONNECTIONS_CONF": "$dir\\connections\\podman-connections.json"
    },
    "persist": [
        "data",
        "config",
        "connections"
    ],
    "checkver": {
        "github": "https://github.com/containers/podman"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/containers/podman/releases/download/v$version/podman-$version-setup.exe",
                "hash": {
                    "url": "$baseurl/shasums"
                }
            }
        }
    }
}
